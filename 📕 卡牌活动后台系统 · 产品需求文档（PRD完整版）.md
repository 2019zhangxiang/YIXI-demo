# **📕 卡牌活动后台系统 · 产品需求文档（PRD完整版）**

## **一、文档信息**

- **文档版本**：V1.0
- **更新时间**：2025-09-01
- **作者**：狂徒张三疯🔥
- **适用范围**：小程序后台管理系统

------

## **二、产品目标**

为「卡牌活动」提供全流程后台支持：活动配置、卡池设置、掉落规则、发奖机制、数据统计、风控监控、异常处理。目标：

1. 运营可快速建活动、配置任务与奖励；
2. 确保奖品库存与发放合规；
3. 数据透明，支持活动复盘；
4. 风控可控，降低异常与漏洞。

------

## **三、用户角色**

| **角色** | **权限范围**                           |
| -------- | -------------------------------------- |
| 产品经理 | 全局配置、卡池规则、概率校验           |
| 运营     | 活动配置、任务管理、奖品发放、数据看板 |
| 客服     | 用户日志查询、异常处理、补发奖品       |
| 风控     | 风控规则配置、黑名单管理               |
| 技术研发 | 系统维护、接口联调、数据回溯、安全审计 |

------

## **四、功能模块（共14个）**


1. **活动管理列表**：展示所有活动（未开始 / 进行中 / 已结束），支持新建、复制模板、灰度设置。
2. **活动基础配置**：活动名称、时间、适用门店、说明、展示顺序，支持定时生效。
3. **卡池配置管理**：12张卡牌、60张碎片，上传图片、名称、稀有度、掉落概率；含概率验证器。
4. **掉落规则设置**：投币、任务、签到、商城获取；每日上限、冷却时间。
5. **用户任务配置**：每日 / 累计任务，阶梯奖励，领取方式（自动 / 手动）。
6. **图鉴展示配置**：排序逻辑、已获得/未获得状态、合成入口跳转。
7. **卡牌合成逻辑**：所需碎片数量、成功概率、保底机制、失败返还。
8. **奖励发放配置**：掉落 / 任务 / 合成触发发奖；奖励类型（电子币、票券、实物）。
9. **奖品库存与审核**：库存管理、阈值预警、大额人工审核。
10. **用户活动日志**：按用户/手机号查询掉落、合成、领奖记录。
11. **活动数据报表**：参与人数、掉落数、合成率、兑换率；支持折线图/饼图/柱状图。
12. **风控监控模块**：高频掉落、异常合成、多设备登录；策略配置+预警。
13. **异常处理中心**：发奖失败、掉落异常、合成异常 → 批量补发、工单闭环。
14. **操作日志审计**：记录后台配置改动（人/时间/旧值/新值），支持导出。

------

## **五、非功能性需求**

- **权限分级**：角色隔离，避免误操作。
- **安全合规**：日志保存 ≥ 1 年；数据加密传输。
- **高可用**：活动高峰期支持 1万+ QPS。
- **审批流**：大额库存变更需二级审批。

------

## **六、风险与对策**

- 【风险点】概率配置错误 → 【建议动作】内置概率校验器
- 【风险点】库存不足 → 【建议动作】预警 + 自动下架
- 【风险点】客服误操作 → 【建议动作】权限隔离 + 审计日志

------

## **七、交付物**

- ✅ 功能结构图（Mermaid）
- ✅ 配置流程图（Mermaid）
- ✅ 关键时序图（Mermaid）
- ✅ 本PRD文档
- ✅ Notion模块表格（分工+状态）

------

# **🖥️ Trae 界面生成 Prompt（后台原型）**

你可以直接复制下面内容到 **Trae**：

```
Design a modern dashboard-style backend system for "卡牌活动后台管理".

Layout:
- Left sidebar navigation (fixed 220px wide).
- Top navigation bar (56px high) with breadcrumbs, notifications, user profile.
- Main content area: card-based layout, responsive.

Sidebar menus:
1. 活动管理
   - 活动列表
   - 活动配置
2. 配置中心
   - 卡池配置
   - 掉落规则
   - 用户任务
   - 图鉴展示
   - 卡牌合成
3. 发奖机制
   - 奖励发放
   - 奖品库存与审核
4. 数据与日志
   - 用户活动日志
   - 活动数据报表
   - 操作日志审计
5. 风控与异常
   - 风控监控
   - 异常处理中心
6. 系统设置

Homepage dashboard cards:
- 活动概览 (进行中、未开始、已结束 + 新建活动按钮)
- 关键数据统计 (用户数、掉落数、合成成功率、发奖成功率)
- 趋势图 (7-day trend of 掉落, 合成, 领奖)
- 风控预警 (今日异常数量、类型)
- 操作日志 (最近3条操作记录)

Style:
- Card-based UI, 微软雅黑 font, theme color deep blue (#0052CC) + teal (#36CFC9).
- Professional, clean, modern backend style.
```